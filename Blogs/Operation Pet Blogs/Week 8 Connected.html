<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Week 8 Connected Games</title>
    <link rel="stylesheet" href="../../styles/blogs.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script async src="../../javascript/index.js"></script>  
    <script src="https://kit.fontawesome.com/0a66c744b9.js" crossorigin="anonymous"></script>  
  </head>
  <body>
            <!-- Navigation Bar Stuff -->
      <!-- The ul tag defines an unordered (bulleted) list -->
      <ul class="bar">
        <li><a class="nav" href="../../index.html">Home</a></li>
        <li><a class="nav" href="../../projects.html">My Projects</a></li>
        <li><a class = "active nav" href="../../blogs.html">My Blogs</a></li>
        <!-- The A tag defines a hyperlink -->
        <a href="https://github.com/Tuchakage">
          <!-- Makes a github logo -->
          <i class="fab fa-github" style="font-size:64px;float:right;color:black;"></i>  
        </a>
          
        <a href="https://www.linkedin.com/in/tuchan-anthony-179727176/">
        <i class="fab fa-linkedin" style="font-size:64px;float:right;color:cornflowerblue" ></i>
        </a>

      </ul>

      
        <!-- Separates the Navigation Bar with everything else below -->
        <div style="padding:20px;margin-top:30px;height:1500px;">
          <div class="header">
            <h1 class = "normal">Week 8</h1>
          </div>
          <div class="leftcolumn">
            <div class = "card">
            <h5 class = "normal">Date Created: Mar 12 , 2025</h5>


            <h2 class = "normal">Whats happened this week?</h2>

            <ul>
              <li>Got started on Spawning Players into game after picking a team in lobby</li>
              <li>Created ScriptableObjects for player models</li>
              <li>Added Collectible food</li>
              <li>Presentation Prep</li>
              <li>Created UML Diagram for my code architecture for presentation</li>
              <li>Started Round Manager & ScoreManager</li>
              <li>Changed team names from colours to animals</li>
              <li>Added mines</li>
              <li>Food can be disguised as mines</li>
              <li>Added Timer</li>
              <li>Created TeamsEnum</li>

            </ul>

            

            
            <p>
              This week i started preparing for the presentation that is next week and wanted to get the 
              game to a state where the audience could see a level a designer has made. I also created a UML Diagram showcasing the architecture of the game for the presentation.
            </p>

            <h2 class = "normal">Using Scriptable Objects</h2>


            <img src="..\..\images\Connected Games Images\Week 8\image.png" style="width: 100%;">



            <p>
              Scriptable objects are useful for saving objects, once you make a change in 
              them they stay the same even if the change is only done in the editor. My purpose for using them is so that designers can easily add in the animal models once 
              they are ready and thanks to the scriptable object i wont need to change anything in the code as long as my code has reference to the scriptable object.
            </p>

            <p>For now as the other programmer is working on the player i will be using coloured cubes that have a 
              photonView and photon Transform View component which allows the cubes movement to be synced across the network meaning all players can see them move.</p>

              <h2 class = "normal">Team Enumerator</h2>
            
              <img src="..\..\images\Connected Games Images\Week 8\image (1).png" style="width: 100%;">

            <p>
              To easily setup teams and roles i created a public static class so that all scripts can easily get access to the Enumerators for example, 
              it is used when setting which team the collectible is for, they are also used to set the roles of players which will be explained later.
            </p>

            <h2 class = "normal">Spawning Players into Game</h2>

            <p>
              Since our lobby menu is done it is now time to get to the next phase of the game which is spawning 
              the players into the game level, to do this i created a Roles Manager script that will handle spawning in both the Pet role and the Wizard role.
            </p>

            <p>
              The roles for each player is going to be stored in the player custom property, 
              this is so that everyone in the game knows what roles each other are and this is especially useful for our SelectPet() and SelectWizard() functions.
            </p>


            <img src="..\..\images\Connected Games Images\Week 8\image (2).png" style="width: 100%;">

            <p>
              In our game we can’t have two players who are in the same role especially since after each round players will swap roles, so i created a function 
              called SetTeammate() which returns the Playerclass, this function goes through all the players in the room and checks if there is another 
              player in the same team and a reference of that player will be kept to check what role they are so that the player can’t select the same class as them.
            </p>

            <img src="..\..\images\Connected Games Images\Week 8\image (3).png" style="width: 100%;">

            <p>
              The SelectPet() and SelectWizard() functions are crucial functions for spawning the player in, first thing 
              that is done is a check to see what the role their teammate is, if it is the same role they 
              are trying to choose then return is called kicking them out of the function. if it is not the same role as their teammate then the code will continue.
            </p>

            <img src="..\..\images\Connected Games Images\Week 8\image (4).png" style="width: 100%;">
            <img src="..\..\images\Connected Games Images\Week 8\image (5).png" style="width: 100%;">

            <p>Then depending on what team and what role, the function will look for spawnpoints that have already been
               added to the level, then exclusive to the  SelectPet() function (Since Wizards won’t have a model) we store what was returned from CheckModelToSpawn() 
               function which simply sets the role of the player in their custom property and a switch case is used to check what team they are on and then return the player model 
               they should use from the scriptable object. After that is done, 
              the ui displaying the roles will be disabled and we call PhotonNetwork.Instantiate passing in the name of our model and their spawnpoint.
            </p>

            <h2 class = "normal">More on Photon Instantiate</h2>
          
            <p>
              The purpose of using Photon Networks instantiate instead of Unitys normal Instantiate 
              function is so that the object that is spawned in is a network object where the client that spawned it in is the owner of the object. 
              In Photons way of Instantiating you might’ve noticed we need to pass in a string with the name of the prefab instead of the Game Object prefab, this is because of 
              the resources folder which allows the game to load the asset during runtime and everything in the resources folder is added to the game build.
            </p>

            <h2 class = "normal">Food & Scores!</h2>
            

            <p>
              This week i have also added a crucial part of the game which is the food collectibles and we have models for them found by our designers!
               Since i have added the food collectibles this also meant i had to add Scores into the game.
            </p>

            <h3 class = "normal">ScoreManager</h3>
            <img src="..\..\images\Connected Games Images\Week 8\image (6).png" style="width: 100%;">
            <img src="..\..\images\Connected Games Images\Week 8\image (7).png" style="width: 100%;">

            <p>I created a script to manage how the scores will be displayed and synced across the network called ScoreManager, 
              this script will create a dictionary with the key value pairing of the teamsEnum (Enumeration with the different team names) and an integer that will represent
               the score of the team. This will be kept track locally for each player and the score will be updated using Photons RPC (Remote Procedure Call) i was thinking of 
               using the OnPhotonSerializeView which will sync the score variable across the network but then remembered that 
              clients will be checking and waiting to receive it every frame when all they need to do is hear the function call and update the score themselves.
            </p>

          
            <h2 class = "normal">References</h2>

            <ul>
              <li>Converting a string to an enum. (n.d.). Unity Discussions. <a href="https://discussions.unity.com/t/converting-a-string-to-an-enum/16705/2">https://discussions.unity.com/t/converting-a-string-to-an-enum/16705/2</a></li>
              <li>How to loop through all enum values in C#? (n.d.). Stack Overflow. <a href="https://stackoverflow.com/questions/972307/how-to-loop-through-all-enum-values-in-c">https://stackoverflow.com/questions/972307/how-to-loop-through-all-enum-values-in-c</a></li>
              <li>Reset player custom properties | Photon Engine. (n.d.). Photon Engine Support Forum | Photon Engine. <a href="https://forum.photonengine.com/discussion/5667/reset-player-custom-properties">https://forum.photonengine.com/discussion/5667/reset-player-custom-properties</a></li>
              <li>Specified cast is not valid.. how to resolve this. (n.d.). Stack Overflow. <a href="https://stackoverflow.com/questions/5577484/specified-cast-is-not-valid-how-to-resolve-this">https://stackoverflow.com/questions/5577484/specified-cast-is-not-valid-how-to-resolve-this</a></li>
              <li>Unity - Scripting API: Coroutine. (n.d.). Unity - Manual: Unity 6.1 User Manual. <a href="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/Coroutine.html">https://docs.unity3d.com/6000.0/Documentation/ScriptReference/Coroutine.html</a></li>
            </ul>

          </div>
          </div>        
        </div>
  
  </body>
</html>